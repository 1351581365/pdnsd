.\" This manpage has been automatically generated by docbook2man-spec
.\" from a DocBook document.  docbook2man-spec can be found at:
.\" <http://shell.ipoline.com/~elmert/hacks/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.\" This manpage has been edited manually by Paul Rombouts.
.TH "PDNSD\-CTL" "8" "01 Jan 2004" "" ""
.SH NAME
\fBpdnsd\-ctl\fR - controls pdnsd
.SH SYNOPSIS
.sp
\fBpdnsd\-ctl\fR [\fB\-c\fR cachedir] [\fB\-q\fR] command [options]
.SH "DESCRIPTION"
.PP
\fBpdnsd\-ctl\fR controls \fBpdnsd\fR, a proxy dns server with permanent caching.
Note that the status control socket must be enabled (by specifying an option on
the pdnsd command line or in the configuration file) before you can use
\fBpdnsd\-ctl\fR.
.PP
.TP
\fB\-c\fR cachedir
set the cache directory to cachedir (must match pdnsd setting).
This is only necessary if the directory differs from the default specified
at compile time.
.TP
\fB\-q\fR
be quiet unless output is specified by command or something goes wrong.
.SH "COMMANDS"
.TP
\fBhelp\fR
[no options]

print short help
.TP
\fBversion\fR
[no options]

print version info
.TP
\fBstatus\fR
[no options]

print pdnsd's status
.TP
\fBserver\fR
(index|label) (\fBup\fR|\fBdown\fR|\fBretest\fR) [dns1[,dns2[,...]]]

Set the status of the servers with the given index or label to up or down, or
force a retest. The index is assigned in the order of definition in pdnsd.conf
starting with 0. Use the status command to view the indexes. You can specify all
instead of an index to perform the action for all servers registered with pdnsd.
.IP
An optional third argument can be given consisting of a list of IP addresses
separated by commas or spaces. This list will replace the addresses of name
servers used by pdnsd for the given server section. This feature is useful for
run-time configuration of pdnsd with dynamic DNS data in scripts called by ppp
or DHCP clients. The last argument may also be an empty string, which causes
existing IP addresses to be removed and the corresponding server section to
become inactive.
.TP
\fBrecord\fR
name (\fBdelete\fR|\fBinvalidate\fR)

Delete or invalidate the record of the given domain if it is 
in the cache.
.TP
\fBsource\fR
fn owner [ttl] [(\fBon\fR|\fBoff\fR)] [\fBnoauth\fR]

Load a hosts-style file. Works like using the pdnsd source option.
Owner and ttl are used as in the source section. ttl has a default
of 900 (it does not need to be specified). The next to last option corresponds
to the serve_aliases option, and is off by default.
\fBnoauth\fR is used to make the domains non-authoritative (please
consult the pdnsd manual for what that means).
fn is the name of the file, which must be readable by pdnsd.
.TP
\fBadd\fR
\fBa\fR addr name [ttl] [\fBnoauth\fR]
.TP
\fBadd\fR
\fBaaaa\fR addr name [ttl] [\fBnoauth\fR]
.TP
\fBadd\fR
\fBptr\fR host name [ttl] [\fBnoauth\fR]
.TP
\fBadd\fR
\fBcname\fR host name [ttl] [\fBnoauth\fR]
.TP
\fBadd\fR
\fBmx\fR host name pref [ttl] [\fBnoauth\fR]

Add a record of the given type to the pdnsd cache, replacing existing
records for the same name and type. The 2nd argument corresponds
to the argument of the option in the rr section that is named like
the first option. The ttl is optional, the default is 900 seconds.
\fBnoauth\fR is used to make the domains non-authoritative (please
consult the pdnsd manual for what that means).
If you want no other record than the newly added in the cache, do
\fBpdnsd\-ctl\fR \fBrecord\fR \fIname\fR \fBdelete\fR
before adding records.
.TP
\fBneg\fR
name [type] [ttl]

Add a negative cached record to pdnsd's cache, replacing existing
records for the same name and type. If no type is given, the whole
domain is cached negative. For negative cached records, errors are
immediately returned on a query, without querying other servers first.
The ttl is optional, the default is 900 seconds.
.TP
\fBlist\-rrtypes\fR
[no options]

List available rr types for the neg command. Note that those are only
used for the neg command, not for add!
.SH "BUGS"
.PP
Mail the authors if you find any.
.SH "AUTHORS"
.PD 0
.PP
Thomas Moestl<tmoestl@gmx.net>
.PP
Paul Rombouts<p.a.rombouts@home.nl> (for versions 1.1.7a\-par and later)
.SH "SEE ALSO"

\fBpdnsd(8)\fR
